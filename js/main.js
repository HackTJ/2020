function hasClass(s,e){return s.classList?s.classList.contains(e):!!s.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function addClass(s,e){s.classList?s.classList.add(e):hasClass(s,e)||(s.className+=" "+e)}function removeClass(s,e){if(s.classList)s.classList.remove(e);else if(hasClass(s,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");s.className=s.className.replace(n," ")}}function apiRequest(s,e,n){var a=new XMLHttpRequest;a.open("POST","https://api.hacktj.org/interest/"+e),a.onreadystatechange=function(){return 4==this.readyState?n(200!==this.status,this.responseText):void 0};var t={};t[e]=s,a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))}var input=document.querySelector("input.contact"),button=document.querySelector("button.submit"),icon=document.querySelector("button.submit .icon"),confirmation=document.querySelector(".confirmation-text"),phoneNumber=/^\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,emailAddress=/^[^@]*@[a-z\-._]{1,}\.[a-z]{2,}$/i,validate=function(s){hasClass(button,"is-disabled")&&input.value?removeClass(button,"is-disabled"):hasClass(button,"is-disabled")||input.value||hasClass(button,"is-done")||addClass(button,"is-disabled"),hasClass(button,"is-done")&&(removeClass(button,"is-done"),removeClass(icon,"icon-check")),hasClass(confirmation,"is-shown")&&removeClass(confirmation,"is-shown"),13===event.keyCode&&submit({})};input.addEventListener("keyup",validate),input.addEventListener("focus",validate),input.addEventListener("blur",validate);var submit=function(s){console.log("submit"),addClass(button,"is-done");var e="invalid",n=input.value.trim();if(n.match(phoneNumber)?e="phone":n.match(emailAddress)&&(e="email"),"email"!==e&&"phone"!==e)confirmation.innerHTML="Uh oh - that doesn't look like a phone number or email address.",addClass(confirmation,"is-shown"),addClass(icon,"icon-close-circle");else{addClass(icon,"icon-config"),addClass(icon,"icon-spin");var a=function(s,e){removeClass(icon,"icon-spin"),removeClass(icon,"icon-config"),s?addClass(icon,"icon-close-circle"):addClass(icon,"icon-check"),confirmation.innerHTML=e,addClass(confirmation,"is-shown")};apiRequest(n,e,a)}return!1};button.addEventListener("click",submit);